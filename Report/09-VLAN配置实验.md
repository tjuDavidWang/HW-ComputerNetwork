# VLAN配置实验

2023/10/16

## 实验目的

掌握VLAN的基本原理并了解如何在交换机上配置VLAN。通过实验加深对VLAN的理解并掌握相关配置命令。

## 实验原理 

虚拟局域网（VLAN，Virtual Local Area Network）能够将地理位置上分散的主机集合到同一个局域网中。以太网交换机，作为网桥的一种发展形式，最初设计用于扩展物理网络的覆盖范围。通过利用交换机内的软件特性，我们可以将其上的端口进行逻辑上的分组。这样，每个逻辑端口组形成的虚拟网络可以被视为一个独立的物理网络。每个VLAN都代表一个广播域，而不同的VLAN之间的通信是相互隔离的。要实现不同VLAN间的通信，必须通过第三层的路由功能。VLAN的配置方式既灵活又多样。

## 实验设备 

- 操作系统：Windows 11
- 网络环境：TJ-WIFI
- 软件：Cisco Packet Tracer虚拟实验环境
  - Cisco2950交换机，具有24个默认10M百兆端口


## 实验步骤

1. 按照下图连接设备，构成网络。

   ![image-20231016154658840](C:\Users\12920\AppData\Roaming\Typora\typora-user-images\image-20231016154658840.png)

2. 通过Config图形化界面为三台PC机配置IP及掩码，依次如下：

   - PC0配置：192.168.1.1 mask 255.255.255.0 F0/1 VLAN10
   - PC1配置：192.168.1.11 mask 255.255.255.0 F0/2 VLAN20
   - PC2配置：192.168.1.21 mask 255.255.255.0 F0/3 VLAN 30

3. 通过图形化界面，为PC0/PC1/PC2分别配置Vlan10, Vlan20, Vlan30

   ![image-20231016155018690](C:\Users\12920\AppData\Roaming\Typora\typora-user-images\image-20231016155018690.png)

   - 使用`sh vlan`命令查看配置

4. 测试：PC0, PC1, PC2之间相互PING，查看结果。

## 实验现象

1. 用PC0分别ping PC1、PC2，用PC1分别ping PC0、PC2，用PC2分别ping PC1、PC0，发现均请求失败

   ![image-20231016155233973](C:\Users\12920\AppData\Roaming\Typora\typora-user-images\image-20231016155233973.png)

## 分析讨论 

1. **VLAN隔离原理**：VLAN是通过按逻辑进行网络分组的方式来工作的。其核心特点是在不同的VLAN之间默认情况下是不允许通信的。这就意味着，尽管PC0、PC1和PC2都连接到同一交换机，但由于它们被配置在不同的VLAN（VLAN10、VLAN20和VLAN30）上，它们之间的通信是被隔离的。
2. **实验结果与VLAN原理一致**：在我们的实验中，所有PING请求均失败。这正符合VLAN的隔离性原理。每台PC在尝试PING其他VLAN上的PC时都未能成功，说明了VLAN在物理网络中成功地创建了逻辑隔离。
3. **广播域的逻辑分隔**：VLAN技术不仅隔离了数据流，还将一个物理广播域分割成了多个逻辑广播域。因此，一个VLAN内的广播消息不会影响到其他VLAN，进一步增强了网络的安全性和效率。
4. **通信需求和VLAN隔离的矛盾**：尽管VLAN提供了隔离，但在现实世界的应用中，有时还是需要不同VLAN之间的设备进行通信。解决这个问题的常见方法是引入三层设备，例如多层交换机或路由器，来进行VLAN间的路由。
5. **故障排查与实验的完整性**：为了确保实验的有效性，还需要确保每台PC的IP地址、子网掩码和VLAN配置都正确，以及交换机的VLAN配置无误，并且每个端口都被正确配置为了对应的VLAN。